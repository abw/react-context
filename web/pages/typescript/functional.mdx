import TypesSrc       from '@/web/lib/Typescript/Types.ts?raw'
import CountSrc       from '@/web/lib/Typescript/Count.tsx?raw'
import CounterSrc     from '@/web/lib/Typescript/Counter.ts?raw'
import CounterAltSrc  from '@/web/lib/Typescript/Counter-alt.ts?raw'
import ControlsSrc    from '@/web/lib/Typescript/Controls.tsx?raw'
import BignumSrc      from '@/web/lib/Typescript/Bignum.tsx?raw'
import App            from '@/web/lib/Typescript/App.tsx'
import AppSrc         from '@/web/lib/Typescript/App.tsx?raw'
import { Example, Source } from '@abw/badger-website'

# Typescript and Functional Components

Let's look at the Typescript equivalent of the [Simple Counter](../simple-counter)
example.

There are two types that need to be defined.  The first (`CounterProps` in this
example) is for the properties that can be passed into the context provider to
configure it.  In this case, we have just one: an optional `initialCount` to
set the initial value for the `count` state variable.

The second (`CounterRenderProps`) is for the properties that will be passed to
context consumers.  This includes the `count` state variable and the `setCount()`
function used to update it.  Both of these are provided by calling React's
`useState()` hook.

We then have two additional functions: `inc` and `dec` as shortcuts to
increment and decrement the count, respectively

<Source
  code={TypesSrc}
  caption="Types.ts"
  expand
/>

When we create the model function, we type it using the `ContextType` generic
type, specifying the `CounterProps` and `CounterRenderProps` types as the
parameters.  We then wrap it using the `Generator` function and return the
result as the default export.

<Source
  code={CounterSrc}
  caption="Counter.ts"
  highlightLines="5,20"
  expand
/>

Alternately, you can combine the two and define the model function inline
in the call to `Generator`.  In this case you don't need the `ContextType`
and can pass the `CounterProps` and `CounterRenderProps` as generic type
parameters on `Generator`.

<Source
  code={CounterAltSrc}
  caption="Counter.ts"
  highlightLines="5,20"
  expand
/>

Components that consume the context properties should type their properties
as the `CounterRenderProps` type.  Here's a component which displays the
current count.

<Source
  code={CountSrc}
  caption="Count.tsx"
  highlightLines="4"
  expand
/>

If you define your function inside the call to `Counter.Consumer` then the
properties will be typed automatically.  Typescript is smart enough in this
case to infer the property types.

<Source
  code={ControlsSrc}
  caption="Controls.tsx"
  highlightLines="4"
  expand
/>

Similarly, if you're using the `Use` hook to access the context properties
then the typing is automatic.

<Source
  code={BignumSrc}
  caption="Bignum.tsx"
  highlightLines="4"
  expand
/>

Here's a complete example to tie it all together.  Note how we can set the
`initialCount` property on the `Counter.Provider` on line 7.

<Example
  Component={App}
  code={AppSrc}
  caption="App.tsx"
  highlightLines="7"
  expand
/>
